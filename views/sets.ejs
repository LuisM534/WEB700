<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Collection</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/theme.css">
</head>
<body>
  <%- include('partials/navbar', { page: '/lego/sets' }) %>

  <main class="container py-5">
    <section class="p-4 bg-white rounded-3 shadow">
      <h1 class="mb-3">Collection</h1>
      <p class="text-muted">Quick filters:
        <% quickThemes.forEach(t => { %>
          <a class="btn btn-sm btn-outline-primary me-2" href="/lego/sets?theme=<%= encodeURIComponent(t) %>"><%= t %></a>
        <% }) %>
        <a class="btn btn-sm btn-outline-secondary" href="/lego/sets">All</a>
      </p>

      <div class="table-responsive">
        <table class="table align-middle">
          <thead>
            <tr>
              <th>Image</th>
              <th>Name</th>
              <th>Theme</th>
              <th>Year</th>
              <th>Parts</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% sets.forEach(s => { %>
              <tr>
                <td>
                  <div class="rounded" style="width: 8rem; height: 8rem; background-image: url('<%= s.img_url %>'); background-size: cover; background-position: center;"></div>
                </td>
                <td><strong><%= s.name %></strong><br><small><code><%= s.set_num %></code></small></td>
                <td>
                  <% if (s.themeName) { %>
                    <a class="btn btn-sm btn-outline-primary" href="/lego/sets?theme=<%= encodeURIComponent(s.themeName.toLowerCase()) %>">
                      <%= s.themeName %>
                    </a>
                  <% } else { %>
                    <span class="badge bg-secondary">Unknown</span>
                  <% } %>
                </td>
                <td><%= s.year %></td>
                <td><%= s.num_parts %></td>
                <td>
                  <a class="btn btn-sm btn-primary" href="/lego/sets/<%= s.set_num %>">details</a>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</body>
</html>
